<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- üö´ Simple Ban Modal - No Complex JavaScript -->
<div th:fragment="ban-modal" id="simpleBanModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="fas fa-ban"></i> <span th:text="#{ban.modal.title}">Ban User Account</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <!-- Simple Form - No JavaScript Validation -->
            <form th:action="@{/Admin/processBan}" method="post">
                <div class="modal-body">
                    <!-- User Info -->
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-exclamation-triangle"></i> <span th:text="#{ban.modal.user.info}">Th√¥ng tin ng∆∞·ªùi d√πng</span></h6>
                        <p><strong th:text="#{ban.modal.user.name}">T√™n:</strong> <span id="displayUserName">-</span></p>
                        <p><strong th:text="#{ban.modal.user.email}">Email:</strong> <span id="displayUserEmail">-</span></p>
                        <p><strong th:text="#{ban.modal.user.role}">Role:</strong> <span id="displayUserRole">-</span></p>
                    </div>
                    
                    <!-- Hidden Fields -->
                    <input type="hidden" name="userId" id="formUserId">
                    <input type="hidden" name="userType" id="formUserType">
                    
                    <!-- Ban Reason -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-exclamation-circle text-danger"></i> 
                            <span th:text="#{ban.modal.reason}">L√Ω do ban</span> <span class="text-danger" th:text="#{ban.modal.reason.required}">*</span>
                        </label>
                        <select class="form-select" name="banReason" required>
                            <option value="" th:text="#{ban.modal.reason.select}">-- Ch·ªçn l√Ω do ban --</option>
                            <!-- Ban reasons ƒë∆∞·ª£c hard-code - kh√¥ng c·∫ßn API -->
                            <option value="SPAM" th:text="#{ban.modal.reason.spam}">Spam n·ªôi dung</option>
                            <option value="INAPPROPRIATE_CONTENT" th:text="#{ban.modal.reason.inappropriate}">N·ªôi dung kh√¥ng ph√π h·ª£p</option>
                            <option value="FAKE_INFORMATION" th:text="#{ban.modal.reason.fake}">Th√¥ng tin gi·∫£ m·∫°o</option>
                            <option value="HARASSMENT" th:text="#{ban.modal.reason.harassment}">Qu·∫•y r·ªëi ng∆∞·ªùi kh√°c</option>
                            <option value="FRAUD" th:text="#{ban.modal.reason.fraud}">L·ª´a ƒë·∫£o</option>
                            <option value="MULTIPLE_ACCOUNTS" th:text="#{ban.modal.reason.multiple}">T·∫°o nhi·ªÅu t√†i kho·∫£n</option>
                            <option value="VIOLATION_TERMS" th:text="#{ban.modal.reason.violation}">Vi ph·∫°m ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng</option>
                            <option value="SYSTEM_ABUSE" th:text="#{ban.modal.reason.abuse}">L·∫°m d·ª•ng h·ªá th·ªëng</option>
                            <option value="OTHER" th:text="#{ban.modal.reason.other}">L√Ω do kh√°c</option>
                        </select>
                    </div>
                    
                    <!-- Ban Description -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-edit"></i> <span th:text="#{ban.modal.description}">M√¥ t·∫£ chi ti·∫øt (t√πy ch·ªçn)</span>
                        </label>
                        <textarea class="form-control" name="banDescription" rows="3" 
                                  maxlength="1000" th:placeholder="#{ban.modal.description.placeholder}"></textarea>
                    </div>
                    
                    <!-- Ban Duration Type -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-clock text-warning"></i> 
                            <span th:text="#{ban.modal.duration.type}">Lo·∫°i th·ªùi gian ban</span> <span class="text-danger" th:text="#{ban.modal.reason.required}">*</span>
                        </label>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="banDurationType" 
                                           value="TEMPORARY" required>
                                    <label class="form-check-label">
                                        <i class="fas fa-calendar-alt"></i> <span th:text="#{ban.modal.duration.temporary}">T·∫°m th·ªùi</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="banDurationType" 
                                           value="PERMANENT" required>
                                    <label class="form-check-label">
                                        <i class="fas fa-ban"></i> <span th:text="#{ban.modal.duration.permanent}">Vƒ©nh vi·ªÖn</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ban Duration Days -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-calendar-day"></i> 
                            <span th:text="#{ban.modal.duration.days}">S·ªë ng√†y ban (ch·ªâ cho ban t·∫°m th·ªùi)</span>
                        </label>
                        <div class="row">
                            <div class="col-md-8">
                                <input type="number" class="form-control" name="banDurationDays" 
                                       min="1" max="365" th:placeholder="#{ban.modal.duration.days.placeholder}">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" onchange="setDays(this.value)">
                                    <option value="" th:text="#{ban.modal.duration.quick}">Ch·ªçn nhanh</option>
                                    <option value="1" th:text="#{ban.modal.duration.1day}">1 ng√†y</option>
                                    <option value="3" th:text="#{ban.modal.duration.3days}">3 ng√†y</option>
                                    <option value="7" th:text="#{ban.modal.duration.1week}">1 tu·∫ßn</option>
                                    <option value="14" th:text="#{ban.modal.duration.2weeks}">2 tu·∫ßn</option>
                                    <option value="30" th:text="#{ban.modal.duration.1month}">1 th√°ng</option>
                                    <option value="90" th:text="#{ban.modal.duration.3months}">3 th√°ng</option>
                                    <option value="180" th:text="#{ban.modal.duration.6months}">6 th√°ng</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Warning -->
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-exclamation-triangle"></i> <span th:text="#{ban.modal.warning.title}">C·∫£nh b√°o</span></h6>
                        <ul class="mb-0">
                            <li th:text="#{ban.modal.warning.1}">H√†nh ƒë·ªông n√†y s·∫Ω kh√≥a t√†i kho·∫£n ng∆∞·ªùi d√πng ngay l·∫≠p t·ª©c</li>
                            <li th:text="#{ban.modal.warning.2}">User s·∫Ω nh·∫≠n email th√¥ng b√°o chi ti·∫øt v·ªÅ vi·ªác b·ªã ban</li>
                            <li th:text="#{ban.modal.warning.3}">Thao t√°c n√†y kh√¥ng th·ªÉ ho√†n t√°c</li>
                        </ul>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> <span th:text="#{ban.modal.cancel}">H·ªßy</span>
                    </button>
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-ban"></i> <span th:text="#{ban.modal.confirm}">X√°c nh·∫≠n Ban User</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- üîì Simple Unban Modal -->
<div th:fragment="simple-unban-modal" id="simpleUnbanModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">
                    <i class="fas fa-unlock"></i> <span th:text="#{unban.modal.title}">Unban User Account</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <form th:action="@{/Admin/processUnban}" method="post">
                <div class="modal-body">
                    <div class="alert alert-info">
                        <h6><i class="fas fa-user"></i> <span th:text="#{unban.modal.user.info}">Th√¥ng tin ng∆∞·ªùi d√πng</span></h6>
                        <p><strong th:text="#{ban.modal.user.name}">T√™n:</strong> <span id="unbanDisplayUserName">-</span></p>
                        <p><strong th:text="#{ban.modal.user.email}">Email:</strong> <span id="unbanDisplayUserEmail">-</span></p>
                        <p><strong th:text="#{ban.modal.user.role}">Role:</strong> <span id="unbanDisplayUserRole">-</span></p>
                    </div>
                    
                    <input type="hidden" name="userId" id="unbanFormUserId">
                    <input type="hidden" name="userType" id="unbanFormUserType">
                    
                    <div class="alert alert-success">
                        <h6><i class="fas fa-check-circle"></i> <span th:text="#{unban.modal.confirm.title}">X√°c nh·∫≠n unban</span></h6>
                        <p class="mb-0" th:text="#{unban.modal.confirm.message}">T√†i kho·∫£n ng∆∞·ªùi d√πng s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i v√† nh·∫≠n email th√¥ng b√°o.</p>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> <span th:text="#{unban.modal.cancel}">H·ªßy</span>
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-unlock"></i> <span th:text="#{unban.modal.confirm}">X√°c nh·∫≠n Unban</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Minimal JavaScript - Only for UI helpers -->
<script>
// Simple helper functions - No complex validation
function openSimpleBanModal(userId, userName, userEmail, userType) {
    document.getElementById('formUserId').value = userId;
    document.getElementById('formUserType').value = userType;
    document.getElementById('displayUserName').textContent = userName;
    document.getElementById('displayUserEmail').textContent = userEmail || '-';
    document.getElementById('displayUserRole').textContent = userType.charAt(0).toUpperCase() + userType.slice(1);
    
    new bootstrap.Modal(document.getElementById('simpleBanModal')).show();
}

function openSimpleUnbanModal(userId, userName, userEmail, userType) {
    document.getElementById('unbanFormUserId').value = userId;
    document.getElementById('unbanFormUserType').value = userType;
    document.getElementById('unbanDisplayUserName').textContent = userName;
    document.getElementById('unbanDisplayUserEmail').textContent = userEmail || '-';
    document.getElementById('unbanDisplayUserRole').textContent = userType.charAt(0).toUpperCase() + userType.slice(1);
    
    new bootstrap.Modal(document.getElementById('simpleUnbanModal')).show();
}

function setDays(value) {
    if (value) {
        document.querySelector('input[name="banDurationDays"]').value = value;
    }
}
</script>

</body>
</html> 