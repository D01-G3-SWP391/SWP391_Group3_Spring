<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- üö´ Simple Ban Modal - No Complex JavaScript -->
<div th:fragment="ban-modal" id="simpleBanModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="fas fa-ban"></i> Ban User Account
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <!-- Simple Form - No JavaScript Validation -->
            <form th:action="@{/Admin/processBan}" method="post">
                <div class="modal-body">
                    <!-- User Info -->
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-exclamation-triangle"></i> Th√¥ng tin ng∆∞·ªùi d√πng</h6>
                        <p><strong>T√™n:</strong> <span id="displayUserName">-</span></p>
                        <p><strong>Email:</strong> <span id="displayUserEmail">-</span></p>
                        <p><strong>Role:</strong> <span id="displayUserRole">-</span></p>
                    </div>
                    
                    <!-- Hidden Fields -->
                    <input type="hidden" name="userId" id="formUserId">
                    <input type="hidden" name="userType" id="formUserType">
                    
                    <!-- Ban Reason -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-exclamation-circle text-danger"></i> 
                            L√Ω do ban <span class="text-danger">*</span>
                        </label>
                        <select class="form-select" name="banReason" required>
                            <option value="">-- Ch·ªçn l√Ω do ban --</option>
                            <!-- Ban reasons ƒë∆∞·ª£c hard-code - kh√¥ng c·∫ßn API -->
                            <option value="SPAM">Spam n·ªôi dung</option>
                            <option value="INAPPROPRIATE_CONTENT">N·ªôi dung kh√¥ng ph√π h·ª£p</option>
                            <option value="FAKE_INFORMATION">Th√¥ng tin gi·∫£ m·∫°o</option>
                            <option value="HARASSMENT">Qu·∫•y r·ªëi ng∆∞·ªùi kh√°c</option>
                            <option value="FRAUD">L·ª´a ƒë·∫£o</option>
                            <option value="MULTIPLE_ACCOUNTS">T·∫°o nhi·ªÅu t√†i kho·∫£n</option>
                            <option value="VIOLATION_TERMS">Vi ph·∫°m ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng</option>
                            <option value="SYSTEM_ABUSE">L·∫°m d·ª•ng h·ªá th·ªëng</option>
                            <option value="OTHER">L√Ω do kh√°c</option>
                        </select>
                    </div>
                    
                    <!-- Ban Description -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-edit"></i> M√¥ t·∫£ chi ti·∫øt (t√πy ch·ªçn)
                        </label>
                        <textarea class="form-control" name="banDescription" rows="3" 
                                  maxlength="1000" placeholder="M√¥ t·∫£ chi ti·∫øt l√Ω do ban..."></textarea>
                    </div>
                    
                    <!-- Ban Duration Type -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-clock text-warning"></i> 
                            Lo·∫°i th·ªùi gian ban <span class="text-danger">*</span>
                        </label>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="banDurationType" 
                                           value="TEMPORARY" required>
                                    <label class="form-check-label">
                                        <i class="fas fa-calendar-alt"></i> T·∫°m th·ªùi
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="banDurationType" 
                                           value="PERMANENT" required>
                                    <label class="form-check-label">
                                        <i class="fas fa-ban"></i> Vƒ©nh vi·ªÖn
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ban Duration Days -->
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-calendar-day"></i> 
                            S·ªë ng√†y ban (ch·ªâ cho ban t·∫°m th·ªùi)
                        </label>
                        <div class="row">
                            <div class="col-md-8">
                                <input type="number" class="form-control" name="banDurationDays" 
                                       min="1" max="365" placeholder="Nh·∫≠p s·ªë ng√†y (1-365)">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" onchange="setDays(this.value)">
                                    <option value="">Ch·ªçn nhanh</option>
                                    <option value="1">1 ng√†y</option>
                                    <option value="3">3 ng√†y</option>
                                    <option value="7">1 tu·∫ßn</option>
                                    <option value="14">2 tu·∫ßn</option>
                                    <option value="30">1 th√°ng</option>
                                    <option value="90">3 th√°ng</option>
                                    <option value="180">6 th√°ng</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Warning -->
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-exclamation-triangle"></i> C·∫£nh b√°o</h6>
                        <ul class="mb-0">
                            <li>H√†nh ƒë·ªông n√†y s·∫Ω kh√≥a t√†i kho·∫£n ng∆∞·ªùi d√πng ngay l·∫≠p t·ª©c</li>
                            <li>User s·∫Ω nh·∫≠n email th√¥ng b√°o chi ti·∫øt v·ªÅ vi·ªác b·ªã ban</li>
                            <li>Thao t√°c n√†y kh√¥ng th·ªÉ ho√†n t√°c</li>
                        </ul>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> H·ªßy
                    </button>
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-ban"></i> X√°c nh·∫≠n Ban User
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- üîì Simple Unban Modal -->
<div th:fragment="simple-unban-modal" id="simpleUnbanModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">
                    <i class="fas fa-unlock"></i> Unban User Account
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            
            <form th:action="@{/Admin/processUnban}" method="post">
                <div class="modal-body">
                    <div class="alert alert-info">
                        <h6><i class="fas fa-user"></i> Th√¥ng tin ng∆∞·ªùi d√πng</h6>
                        <p><strong>T√™n:</strong> <span id="unbanDisplayUserName">-</span></p>
                        <p><strong>Email:</strong> <span id="unbanDisplayUserEmail">-</span></p>
                        <p><strong>Role:</strong> <span id="unbanDisplayUserRole">-</span></p>
                    </div>
                    
                    <input type="hidden" name="userId" id="unbanFormUserId">
                    <input type="hidden" name="userType" id="unbanFormUserType">
                    
                    <div class="alert alert-success">
                        <h6><i class="fas fa-check-circle"></i> X√°c nh·∫≠n unban</h6>
                        <p class="mb-0">T√†i kho·∫£n ng∆∞·ªùi d√πng s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t l·∫°i v√† nh·∫≠n email th√¥ng b√°o.</p>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> H·ªßy
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-unlock"></i> X√°c nh·∫≠n Unban
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Minimal JavaScript - Only for UI helpers -->
<script>
// Simple helper functions - No complex validation
function openSimpleBanModal(userId, userName, userEmail, userType) {
    document.getElementById('formUserId').value = userId;
    document.getElementById('formUserType').value = userType;
    document.getElementById('displayUserName').textContent = userName;
    document.getElementById('displayUserEmail').textContent = userEmail || '-';
    document.getElementById('displayUserRole').textContent = userType.charAt(0).toUpperCase() + userType.slice(1);
    
    new bootstrap.Modal(document.getElementById('simpleBanModal')).show();
}

function openSimpleUnbanModal(userId, userName, userEmail, userType) {
    document.getElementById('unbanFormUserId').value = userId;
    document.getElementById('unbanFormUserType').value = userType;
    document.getElementById('unbanDisplayUserName').textContent = userName;
    document.getElementById('unbanDisplayUserEmail').textContent = userEmail || '-';
    document.getElementById('unbanDisplayUserRole').textContent = userType.charAt(0).toUpperCase() + userType.slice(1);
    
    new bootstrap.Modal(document.getElementById('simpleUnbanModal')).show();
}

function setDays(value) {
    if (value) {
        document.querySelector('input[name="banDurationDays"]').value = value;
    }
}
</script>

</body>
</html> 