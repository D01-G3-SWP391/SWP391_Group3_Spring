<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <link rel="stylesheet" th:href="@{/css/language-switcher.css}" />
  <link
          href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap"
          rel="stylesheet"
  />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ứng tuyển công việc</title>
  <link rel="stylesheet" th:href="@{/css/apply-form.css}">
</head>
<body>
<!-- Modal Overlay -->
<div id="applyForm" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Ứng tuyển</h2>
      <button class="close-btn" onclick="closeApplyForm()">&times;</button>
    </div>

    <form th:action="@{/Student/addJobApplication}" method="post" th:object="${jobApplicationDTO}" th:each="job : ${jobPosts}">
      <input type="hidden" th:value="${studentDetails.studentId != null ? studentDetails.studentId : null}" name="studentId">
      <input type="hidden" th:value="${job.jobPostId != null ? job.jobPostId : null}" name="jobPostId">

      <div class="form-group">
        <label for="fullName">Họ và tên *</label>
        <input type="text" id="fullName" name="fullName" th:field="*{fullname}" required/>
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input type="email" id="email" name="email" th:field="*{email}" required/>
      </div>

      <div class="form-group">
        <label for="phone">SĐT *</label>
        <input type="text" id="phone" name="phone" th:field="*{phoneNumber}" required/>
      </div>
      <div class="form-group">
        <label for="content">Nội dung *</label>
        <textarea id="content" name="content" th:field="*{description}" placeholder="Tôi muốn ứng tuyển vị trí này" required></textarea>
      </div>

      <div class="form-group">
        <label for="cv">Hồ sơ ứng viên (CV)</label>
        <input th:field="*{cv_url}" type="file" id="cv" name="cv" accept=".doc,.docx,.pdf,.png,.jpeg"/>
        <p class="file-info">Hỗ trợ định dạng doc, docx, pdf, png, jpeg nhỏ hơn 2048KB</p>
        <p class="cv-tip">Gửi kèm hồ sơ (CV) giúp bạn tăng cơ hội được tuyển dụng. Tạo tài khoản và hồ sơ trên hệ thống giúp bạn nhận được nhiều thông tin việc làm từ Nhà tuyển dụng</p>
      </div>

      <div class="button-group">
        <button type="submit" class="submit-btn">Gửi</button>
        <button type="button" class="cancel-btn" onclick="closeApplyForm()">Đóng</button>
      </div>
    </form>
  </div>
</div>

<script>
  function closeApplyForm() {
    document.getElementById('applyForm').classList.add('hidden');
  }

  function showApplyForm() {
    document.getElementById('applyForm').classList.remove('hidden');
  }

  // Đóng form khi click bên ngoài
  document.getElementById('applyForm').addEventListener('click', function(e) {
    if (e.target === this) {
      closeApplyForm();
    }
  });

  // Đóng form bằng phím ESC
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && !document.getElementById('applyForm').classList.contains('hidden')) {
      closeApplyForm();
    }
  });
</script>
</body>
<script th:src="@{/js/languageSwitch.js}"></script>

</html>
